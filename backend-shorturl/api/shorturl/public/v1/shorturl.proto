syntax = "proto3";

package shorturl.v1;

import "google/api/annotations.proto";

option go_package = "backend-shorturl/api/shorturl/public/v1;v1";

// The greeting service definition.
service Public {
  rpc CreateShortUrl (ShortenRequest) returns (ShortenReply){
    option(google.api.http)={
      post: "/api/shorten",
      body:"*"
    };
  }
  rpc Redirect (RedirectRequest) returns (RedirectReply) {
    option (google.api.http) = {
      get: "/api/{code}"
      response_body: "long_url"
      additional_bindings: {
        get: "/api/{code}/redirect"
        response_body: "long_url"
      }
    };
  }
}
message ShortenRequest{
  string long_url=1;
  string expire_time =2 ;
}

message ShortenReply{
  string code =1;
  Data data =2;
  string message=3;
}
message Data{
   string short_code=1;
   string short_url=2;
   string long_url=3;
   string create_at=4;
   string expire_time=5;
}

message RedirectRequest{
  string code = 1;
}

message RedirectReply{
  string long_url = 1;
}